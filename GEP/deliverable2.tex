\subsection{Herramientas}

Para efectuar el seguimiento del proyecto junto a mi director y co-director, se ha utilizado un \textit{workspace} de \textit{Slack} para las comunicaciones directas (para decidir dónde y cuándo hacer las reuniones por ejemplo), y \textit{Trello} para gestionar las tareas a desempeñar en cada iteración. Como ya se ha mencionado anteriormente, para el control de versiones del proyecto, código y documentación se ha utilizado respectivamente \textit{GitLab} y \textit{GitHub}.

%%%%%%%

\section{Planificación temporal}
\label{sec:planificacion}

Esta sección presenta cómo planificamos los cuatro meses de duración que tiene el proyecto, desde Febrero de 2019 hasta Junio de 2019 y cómo han sucedido realmente. Se especificarán las tareas a realizar junto a su durada aproximada y la duración que creemos que han tenido finalmente, también se han tenido en cuenta las posibles desviaciones en la realización de estas.

\subsection{Especificación de las tareas}

Detallamos a continuación las tareas a realizar.

\subsubsection{GEP - Gestión de proyectos}

La primera tarea del proyecto es la gestión de este, se han elaborado cuatro entregables que sintetizan la temática del proyecto, los objetivos, como se realizaría cuando se planificó y como se ha realizado, la metodología que se ha seguido, las actividades que se han realizado, y un estudio de sostenibilidad.

\begin{itemize}
 \item \textbf{Elaboración del primer entregable:} En este primer apartado se  un contexto, el estado del arte del proyecto, los objetivos, requerimientos, riesgos y una metodología para desarrollar el proyecto en sí. La duración aproximada es de unas 24 horas.
 \item \textbf{Elaboración del segundo entregable:} En este apartado se definen las actividades y duración de estas. La duración aproximada es de 6 horas.
 \item \textbf{Elaboración del tercer entregable:} En este apartado se ha realizado la auto-evaluación sobre la sostenibilidad además de un análisis sobre la gestión económica y la sostenibilidad del proyecto. La duración aproximada es de 18 horas.
 \item \textbf{Elaboración del cuarto entregable:} En este último apartado se ha preparado una presentación oral y se ha confeccionado el documento final, que serán los tres anteriores revisados y corregidos con la orientación del \textit{feedback} del profesor de \textit{}, director y co-director. La duración aproximada es de 12 horas.
\end{itemize}

Con estos cuatro apartados se finaliza el primer bloque de tareas. En princpio, la duración estipulada del GEP es de 75 horas, la duración final ha sido de 60 horas por lo que tuvimos tiempo para revisar y repasar estos apartados.

\par\bigskip

Para realizar esta actividad, se ha utilizado un ordenador, \textit{GitHub} para subir la documentación, \textit{Kile} para redactar el documento en \textit{LaTeX},\textit{Trello} para organizar las actividades en forma de tarjetas, \textit{Gantter} para elaborar el diagrama de \textit{Gantt} y \textit{Google Drive}.

\subsubsection{Uso de la API de Nanos6}

Para poder llevar acabo exitosamente la integración, se necesita entender qué hace y saber utilizar la \textit{API} de \textit{Nanos6}. Requiere mirar documentación e interactuar con los desarrolladores de \textit{Nanos6}. 
\par\bigskip

Hemos aprendido a utilizar la llamada \textit{nanos6\_spawn\_function}, que nos permite ejecutar una función como tarea. Para poder utilizarla, necesitamos levantar el \textit{runtime} de manera manual en un programa compilado con \textit{gcc} (\textit{GNU C Compiler}) o bien \textit{g++} cuando se utilice \textit{C++}, y efectuar la llamada a una función externa compilada con \textit{mcc} (\textit{Mercurium}), ya que estará anotada con pragmas de \textit{OmpSs-2}.
\par\bigskip

La duración de esta tarea ha sido de 60 horas. Los recursos necesarios son un ordenador con un compilador nativo de \textit{C}, otro de \textit{C++}, y \textit{Mercurium} y \textit{Nanos6} instalados. 

\subsubsection{Integrar OmpSs-2 en el binding de C/C++}

La tarea principal que da sentido al proyecto es esta, comprende el estudio y la integración de \textit{OmpSs-2} en el \textit{binding} de \textit{C/C++}. Requiere del estudio de la estructura interna de \textit{COMPSs} por una banda y del \textit{binding} por otra, hemos tenido que decidir dónde se puede inicializar el \textit{runtime} de \textit{Nanos6} y cuándo se debe apagar. También se necesita hacer la llamada a la \textit{API} en el \textit{worker}, cosa que ha habido que estudiar dónde situar dentro del código.
\par\bigskip

El primer paso ha consistido en analizar dónde tiene más sentido que hagamos la gestión del \textit{runtime} de \textit{Nanos6}, y cómo hacerla. Para se ha repasado el código de \textit{COMPSs} y se ha determinado qué hace cada componente de este. 
%\par\bigksip

En segundo lugar se ha implementado toda la gestión. Claro que también ha habido que efectuar la llamada a la \textit{API} y verificar el funcionamiento de la integración, ha sido lo que más tiempo nos ha llevado sin duda alguna.
%\par\bigskip

Esta tarea ha sido la que más tiempo nos ha llevado, pero nos ha conocimiento pleno de cómo funciona el modo librería y el \textit{binding} de\textit{C/C++}. La duración ha estado alrededor de 96 horas. Los recursos necesarios han sido un ordenador con \textit{COMPSs} instalado, un compilador nativo de \textit{C}, otro de \textit{C++}, y \textit{Mercurium} y \textit{Nanos6} instalados.

\subsubsection{Estudiar la integración de OmpSs-2 en Java y binding de Python}

\begin{comment}
En caso de que la primera integración haya funcionado, se estudiará la posibilidad de hacer lo mismo con \textit{Java} y el \textit{binding} de \textit{Python}. Consistirá exactamente de los mismos pasos, y puede ayudar a mejorar la implementación anterior. La duración estimada de esta tarea dependerá de si se decide realizar o no esta actividad. Mínimo se emplearán 15 horas en el estudio preliminar, y en caso de realizar la integración, 78 horas más, es decir, 15 horas o bien 93 horas. Pese a que la tarea es muy similar a la anterior, el tiempo previsto es algo menor por el hecho de que ya se ha podido realizar una integración y la implementación debería ser parecida. Los recursos necesarios son un ordenador con \textit{COMPSs} instalado, un compilador nativo de \textit{C}, otro de \textit{C++}, y \textit{Mercurium} y \textit{Nanos6} instalados.
\end{comment}

Finalmente esta tarea se descartó, fue preferible invertir tiempo en el resto de funcionalidades y evaluar la integración de la mejor manera posible. Aún así, se invirtió tiempo en sopesar posibilidades para realizar tanto la integración de \textit{Java} como la de \textit{Python}, por lo que la duración ha sido alrededor de 15 horas.

\subsubsection{Desarrollo de una aplicación que use COMPSs+OmpSs-2}

En esta tarea se han desarrollado dos aplicaciones, \textit{K-Means} y \textit{Cholesky} utilizando \textit{COMPSs+OmpSs-2}, se han utilizado para evaluar el rendimiento en otra tarea. Hemos empleado aproximadamente 84 horas en desarrollar ambas aplicaciones y testear que funcionasen. Los recursos necesarios son un ordenador con \textit{COMPSs} instalado, un compilador nativo de \textit{C}, otro de \textit{C++}, y \textit{Mercurium} y \textit{Nanos6} instalados

\subsubsection{Estudio del rendimiento}

Utilizando las aplicaciones desarrolladas en la tarea anterior hemos estudiado el rendimiento de la integración. Se ha hecho uso de opciones de \textit{COMPSs} para medir cuánto tarda cada tarea enviada a un nodo. 
\par\bigskip

Estudiar el rendimiento ha incluido intentar optimizar al máximo todas las pérdidas de rendimiento en la medida de lo posible, por lo cual el tiempo aproximado para llevarla a cabo, ha sido de 84 horas. Los recursos necesarios son un ordenador con \textit{COMPSs} instalado, un compilador nativo de \textit{C}, otro de \textit{C++}, y \textit{Mercurium} y \textit{Nanos6} instalados.

\subsubsection{Limitaciones de COMPSs+OmpSs-2}

Dado que este proyecto parte de la premisa de resolver unos problemas concretos con el rendimiento, se efectúa un estudio muy concreto hacia estos problemas para ver si están resueltos o no. Que este estudio vaya mal o no, no afecta realmente al proyecto, ya que se intentará ver si \textit{OmpSs-2} mejora respecto a \textit{OmpSs} de todas formas.

\subsubsection{Redactar la memoria}

Por último se ha redactado la memoria del proyecto además de preparar todo el material audiovisual para la defensa de este. La duración de esta actividad ha sido de unas 72 horas. Los recursos que utilizados son \textit{Kile} para redactar el documento en \textit{LaTeX}, \textit{GitHub} para guardar la documentación y \textit{LibreOffice} para el apoyo audiovisual que se utilizará durante la defensa.

\subsection{Dependencias}

La siguiente tabla define la relación de dependencia entre las tareas que conciernen a la gestión del proyecto.

\begin{table}[H]
\centering
 \begin{tabular}{|| l | l ||}
    \hline  
    Tarea dependiente & Tarea predecesora \\
    \hline\hline
    Contexto & - \\
    \hline
    Estado del arte & Contexto \\
    \hline
    Objetivos, requerimentos, riesgos & Estado del arte \\
    \hline
    Metodología & Objetivos, requerimentos, riesgos \\
    \hline
    Definir actividades & Metodología \\
    \hline
    Estimar tiempos & Definir actividades \\
    \hline
    Autoevaluación sobre la sostenibilidad & Estimar tiempos \\
    \hline
    Análisis del proyecto & Autoevaluación sobre la sostenibilidad \\
    \hline
    Confeccionar documento final & Análisis del proyecto \\
    \hline
    Preparar presentación & Confeccionar documento final \\
    \hline
 \end{tabular}
 \caption{Relación de dependencia para las tareas de la gestión del proyecto.}
 \label{table:1}
\end{table}

La tabla anterior muestra la relación de dependencia, se respetará esta relación ya que las tareas a elaborar se agrupan y tienen fecha de entrega por separado. 

\begin{table}[H]
 \centering
 \begin{tabular}{|| l | l ||}
    \hline  
    Tarea dependiente & Tarea predecesora \\
    \hline\hline
    Uso de la API Nanos6 & GEP \\
    \hline
    Integrar OmpSs-2 en C/C++ & Uso de la API \\
    \hline
    Integrar OmpSs-2 en Java & Integrar OmpSs-2 en C/C++ \\
    \hline
    Integrar OmpSs-2 en Python & Integrar OmpSs-2 en Java \\
    \hline
    Estudio previo del rendimiento & Integrar OmpSs-2 en Python \\
    \hline
    Desarrollo aplicación COMPSs+OmpSs-2 & Estudio previo del rendimiento \\
    \hline
    Estudio del rendimiento & Desarrollo aplicación COMPSs+OmpSs-2 \\
    \hline
    Redactar la memoria & Estudio del rendimiento \\
    \hline
 \end{tabular}
    \caption{Relación de dependencia para las tareas de implementación del proyecto.}
    \label{table:2}
\end{table}

Salvo por algún motivo que implique bloquear una tarea, no se deberán adelantar tareas dependientes a las predecesoras, entre estos posibles motivos se contemplan errores en la implementación que nos bloqueen y se puedan ir haciendo otras cosas y cambios generales en las tareas a realizar.

\subsection{Estimación temporal de las tareas y recursos necesarios}

En el momento en el que se han enumerado y explicado las tareas se ha comentado la duración temporal y los recursos necesarios para cada actividad. En las siguientes dos secciones se recopilan estos datos en forma de tabla.

\subsection{Estimación temporal de las tareas}

\begin{table}[H]
 \centering
 \begin{tabular}{|| l | l ||}
  \hline
  Tarea & Estimación temporal (horas) \\
  \hline\hline
   Gestión del proyecto & 60 \\%& GitHub, Kile, Trello, Gantter, Google Drive \\
   \hline
   Uso de la API Nanos6 & 60 \\%& Compilador de C y C++, Mercurium, Nanos6 \\
   \hline
   Integrar OmpSs-2 en C/C++ & 96 \\%& COMPSs, Compilador de C y C++, Mercurium, Nanos6 \\
   \hline
   Integrar OmpSs-2 en Java y Python & 93 \\%& COMPSs, Compilador de C y C++, Mercuirum, Nanos6 \\
   \hline
   Desarrollo aplicación COMPSs+OmpSs-2 & 84 \\%& COMPSs, Compilador de C y C++, Mercurium, Nanos6 \\
   \hline
   Estudio del rendimiento & 84 \\%& COMPSs, Compilador de C y C++, Mercurium, Nanos6 \\
   \hline
   Redactar la memoria & 72 \\%& GitHub, Kile, LibreOffice \\
  \hline
  Total & 549 \\
  \hline
 \end{tabular}
 \caption{Estimación temporal de las tareas.}
\end{table}

\subsection{Duración real de las tareas}

Todas las tareas han durado lo esperado a excepción de la tarea que consiste en realizar la integración de \textit{OmpSs-2} en \textit{Java} y \textit{Python}, nos hemos limitado a hacer el estudio preliminar, por lo que ha durado 15 horas.

\begin{table}[H]
 \centering
 \begin{tabular}{|| l | l ||}
  \hline
  Tarea & Estimación temporal (horas) 			\\
  \hline\hline
   Gestión del proyecto & 60 					\\
   \hline
   Uso de la API Nanos6 & 60 					\\
   \hline
   Integrar OmpSs-2 en C/C++ & 96 				\\
   \hline
   Integrar OmpSs-2 en Java y Python & 15 		\\
   \hline
   Desarrollo aplicación COMPSs+OmpSs-2 & 84 	\\
   \hline
   Estudio del rendimiento & 84 				\\
   \hline
   Redactar la memoria & 72 					\\
  \hline
  Total & 471 									\\
  \hline
 \end{tabular}
 \caption{Estimación temporal de las tareas.}
\end{table}

\subsection{Recursos necesarios para las tareas}

\begin{table}[H]
 \centering
 \begin{tabular}{| l | l |}
 \hline
 Tarea & Recursos necesarios \\
 \hline\hline  
 Gestión del proyecto & GitHub, Kile, Trello, Gantter, Google Drive \\
 \hline
 Uso de la API Nanos6 & Compilador de C y C++, Mercurium, Nanos6 \\
 \hline
 Integrar OmpSs-2 en C/C++ & COMPSs, Compilador de C y C++, Mercurium, Nanos6 \\
 \hline
 Integrar OmpSs-2 en Java y Python & COMPSs, Compilador de C y C++, Mercurium, Nanos6 \\
 \hline
 Estudio del rendimiento & COMPSs, Compilador de C y C++, Mercurium, Nanos6 \\
 \hline
 Redactar la memoria & GitHub, Kile, LibreOffice \\
 \hline
 \end{tabular}
 \caption{Recursos necesarios para las tareas.}
\end{table}

En la tabla anterior, se muestran los recursos estrictamente necesarios para realizar cada tarea, sin embargo, se ofrece ahora una lista de los recursos \textit{hardware} y \textit{software} que se han utilizado para la realización del proyecto en general. Además hay que tener en cuenta todos los recursos humanos necesarios.

\subsubsection{Recursos hardware}

\begin{itemize}

 \item \textbf{Ordenador portátil:} Proporcionado por el \textit{BSC}, Dell Latitude 7480 Intel® Core™ i7-6650U Processor (Dual Core, 4M Cache, 2.2GHz,15W, vPro), 512GB SSD (\textit{Solid State Drive}), Intel® HD Graphics 540 y 16 GB de memoria \textit{RAM}.
 
 \item \textbf{Pantalla:} Es habitual la configuración de portátil con una pantalla para simular una torre, la pantalla externa es también Dell, el modelo Professional P2217H.
 
 \item \textbf{Periféricos:} Todos los periféricos, ratón y teclado en este caso.
 
 \item \textbf{Clústers:} Con tal de medir el rendimiento ejecutando la aplicación que se ha desarrollado haciendo uso de la integración, necesitaremos un clúster con una arquitectura heterogénea. En la lista de candidatos se encontraban \textit{MinoTauro} y \textit{CTE-Power}, pero al final se descartó \textit{MinoTauro} por problemas de compatibilidad y se utilizó \textit{MareNostrum4}
 
 \item \textbf{Puesto de trabajo:} El equipo de \textit{WDC} se encuentra en el edificio \textit{K2M}, allí es donde el desarrollador tiene su puesto de trabajo y ha desarrollado la mayoría del proyecto.
 
\end{itemize}

\subsubsection{Recursos software}

\begin{itemize}
    \item \textbf{Ubuntu 18.04:} Con tal de desarrollar se necesita un sistema operativo, el portátil tiene instalado \textit{Ubuntu 18.04}.

    \item \textbf{GitHub y GitLab:} Para efectuar un control de versiones sencillo y eficaz, se ha utilizado el \textit{GitHub} personal del desarrollador para gestionar la documentación y el \textit{GitLab} del grupo \textit{WDC} para gestionar el código.

    \item \textbf{Editores: } Para editar código en \textit{Java} se ha utilizado \textit{IntelliJ IDEA}, para \textit{Python} \textit{PyCharm}, ambos de \textit{JetBrains}, y para C y C++ se ha usado \textit{Vim}.

    \item \textbf{Terminal: } La gran parte del tiempo ha estado entre terminales haciendo implementaciones y probando su funcionamiento, para hacer uso de un terminal utilizamos el emulador de terminales \textit{Terminator}.

    \item \textbf{Planificación y organización: } Para hacer el diagrama de \textit{Gantt} se ha utilizado \textit{Gantter} como extensión para \textit{Google Drive}. Además para organizarse y emplear la metodología iterativa se utilizará \textit{Trello}.

    \item \textbf{Compiladores y gestores de proyectos: } Para compilar código en C y C++ se usa \textit{gcc} y \textit{g++} respectivamente, para todo código que use \textit{OmpSs-2} se ha utilizado \textit{Mercurium}. El proyecto de \textit{COMPSs} está gestionado con \textit{Maven}, de esta manera se pueden generar todos los ficheros de \textit{Java} de manera sencilla. 
    
    \item \textbf{Software del proyecto: } Para poder desarrollar el proyecto, se precisa de una instalación de \textit{COMPSs}, \textit{Nanos6} y \textit{Mercurium}. Además, para medir el rendimiento se utiliza \textit{Extrae} y \textit{Paraver}. Con fines de \textit{debugging} se ha utilizado \textit{gdb}.

    \item \textbf{Editores de texto: } Para escribir el \textit{LaTeX} se utiliza \textit{Kile}.
\end{itemize}

\subsubsection{Recursos humanos}

\begin{itemize}
 \item \textbf{Director y co-director: } Han efectuado el seguimiento del proyecto de manera rutinaria y han ayudado a que el desarrollador sea capaz de llevarlo a cabo. 
 \item \textbf{Soporte: } Al utilizar \textit{software} de diversos proyectos, todas las personas que han ayudado al desarrollador a solucionar problemas han sido recursos necesarios del proyecto.
 \item \textbf{Desarrollador: } Persona encargada de llevar a cabo en última instancia el proyecto.
\end{itemize}

\subsection{Valoración de alternativas y plan de acción}

En un proyecto de este tipo, es probable que haya desviaciones respecto el plan original. Esto es normal, tan sólo hay que saber cómo actuar ante estas desviaciones. Cualquier error en una implementación puede acarrear tiempo de más para solucionarlo, e incluso algo que se implementó hace mucho puede influir en las del futuro, por ello nuestra planificación intenta ser flexible, aún así, debemos planear como actuar en estos casos.

\begin{itemize}
 \item Si una tarea dura menos de lo esperado, sencillamente hay que coger la siguiente de la planificación y empezar a hacerla. Que una tarea dure menos que otra nos puede aportar un margen de acción muy útil.
 \item Si una tarea dura más tiempo de lo esperado, habrá que planteárselo de dos maneras, o bien se acorta otra tarea con tal de ajustarnos a la planificación o bien se intentan reducir lo mínimo posible los objetivos del proyecto para poderlo acabar en el tiempo establecido.
\end{itemize}

La tarea que más tiempo puede llevar dada la aparición de imprevistos es la de integrar \textit{OmpSs-2} en el \textit{binding} de C. Dado que la documentación aún está en una fase un tanto primeriza y no siempre tenemos por qué contar con el apoyo de soporte, por lo cuál habrá que invertir tiempo extra en ese caso. 
\par\medskip
El resto de tareas van un poco de la mano de esta anterior, no debería haber ninguna complicación extra. Como mucho en el estudio del rendimiento podemos encontrar resultados que no nos gusten o no acaben de agradar del todo, pero es parte del proyecto, se intentará mejorar dentro del tiempo estipulado. 
\par\medskip
Por tanto, siempre que falte tiempo para realizar una tarea se intentará equilibrar entre el resto, ya que el riesgo de sufrir un imprevisto es bastante bajo.
\par\bigskip
Para ser más previsores, en las reuniones de seguimiento se intentarán prever estos posibles problemas durante la realización del proyecto. 

De hecho, en un punto del proyecto descubrimos que \textit{MinoTauro} no era compatible con \textit{OmpSs-2} si queríamos hacer uso de las \textit{GPUs}, por esto tuvimos que rectificar y decidir utilizar \textit{MareNostrum4} y sacar provecho tan sólo de las \textit{CPUs}. También, el hecho de no haber realizado la integración en \textit{Java} y \textit{Python} supone de alguna manera una desviación, pero ya estaba prevista.


















